# Backend Environment Variables
# Copy this to .env.local for local development

# ===========================================
# LOCAL SUPABASE (use npm run db:start first)
# ===========================================
# SUPABASE_URL=http://127.0.0.1:54321
# SUPABASE_SECRET=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
# SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# ===========================================
# PRODUCTION SUPABASE
# ===========================================
# Backend MUST use the service_role key (not anon key) so RLS is bypassed; otherwise
# deal_invoices and other tables may return no rows and you'll see "Invoice not found".
SUPABASE_URL=https://rfxzswjefgxwgmjvcckf.supabase.co
SUPABASE_SECRET=your-service-role-key-here
# Or: SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_PROJECT_ID=rfxzswjefgxwgmjvcckf

# ===========================================
# REDIS (Optional - for caching/locks)
# ===========================================
# REDIS_URL=redis://localhost:6379

# ===========================================
# AUTH & SECURITY
# ===========================================
CRON_SECRET=your-cron-secret-here
ADMIN_USER_IDS=your-privy-user-id

# ===========================================
# THIRD PARTY SERVICES
# ===========================================
ONECLICK_JWT=your-oneclick-jwt
ONECLICK_API_BASE=https://1click.chaindefuser.com
RHINESTONE_API_KEY=your-rhinestone-key

# ===========================================
# SOLANA FEE SPONSORSHIP (Pay with Loofta - 0 SOL)
# ===========================================
# Base58 private key of a wallet funded with SOL. Used as fee payer for sponsored USDC transfers.
# Optional: if not set, client falls back to Privy signAndSendTransaction (may fail if user has 0 SOL).
# SOLANA_FEE_PAYER_PRIVATE_KEY=your-base58-private-key
# SOLANA_RPC_URL=https://mainnet.helius-rpc.com/?api-key=...
# HELIUS_API_KEY=your-helius-key

# ===========================================
# NEAR — NETWORK (mainnet vs testnet)
# ===========================================
# Use mainnet for production so attestation and receipt logging match real payments.
# NEAR_NETWORK_ID=mainnet
# NEAR_RPC_URL=optional; defaults to rpc.mainnet.near.org (mainnet) or rpc.testnet.near.org (testnet)

# ===========================================
# NEAR CLAIM ATTESTATION (optional)
# ===========================================
# When set, completed claim payments are recorded on-chain (contracts/payroll-attestation).
# Deploy: see contracts/payroll-attestation/DEPLOY_NEAR.md and README.md.
# For mainnet: deploy with NEAR_ENV=mainnet and use mainnet contract/account IDs.
# NEAR_ATTESTATION_CONTRACT_ID=payroll-attestation.yourname.near
# NEAR_ATTESTATION_NEAR_ACCOUNT_ID=your-backend.near
# NEAR_ATTESTATION_NEAR_PRIVATE_KEY=ed25519:...

# ===========================================
# NEAR PAYROLL RECEIPT LOGGER (optional, for deal payments)
# ===========================================
# When set, completed deal payment invoices get a receipt (hash commitment) recorded on NEAR.
# Uses NEAR_NETWORK_ID above — set to mainnet in production so receipts are on the same network as payments.
# Contract must expose: record_receipt(payroll_id, batch_hash, authorizer_id, nonce, executor_id, status, tx_refs_hash).
# PAYROLL_RECEIPT_LOGGER_CONTRACT_ID=receipt-logger.yourname.near
# PAYROLL_RECEIPT_LOGGER_NEAR_ACCOUNT_ID=your-backend.near
# PAYROLL_RECEIPT_LOGGER_NEAR_PRIVATE_KEY=ed25519:...

# ===========================================
# APP CONFIG
# ===========================================
PORT=4000
NODE_ENV=development
